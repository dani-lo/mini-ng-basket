angular.module("DaniDevBasket",["DaniDevBasket.controllers","DaniDevBasket.directives","DaniDevBasket.services"]).constant("APPCONFIG",{version:"0.1",imgBase:"public/images",endpoints:{products:{list:"/assets/products.json",type:"GET"}}}),angular.module("DaniDevBasket.services",[]).factory("ProductsListService",["$http","APPCONFIG",function(a,b){"use strict";return{getProducts:function(){return a.get(b.endpoints.products.list)}}}]),angular.module("DaniDevBasket.controllers",[]).controller("ProductsListCtrl",["$scope","$rootScope","ProductsListService",function(a,b,c){"use strict";function d(b){return a.products.find(function(a){return a.item_id===b})}a.isloaded=!1,a.products=[],c.getProducts().then(function(b){var c=b.data;c.forEach(function(a){a.inbasket=!1}),a.products=b.data,setTimeout(function(){a.isloaded=!0,a.$apply()},1e3)}),a.itemToBasket=function(c){var e=d(c);a.products[a.products.indexOf(e)].inbasket=!0,b.$emit("basket:add",e)},a.itemFromBasket=function(c){var e=d(c);a.products[a.products.indexOf(e)].inbasket=!1,b.$emit("basket:remove",e)}}]).controller("ProductsBasketCtrl",["$scope","$rootScope",function(a,b){"use strict";function c(b){a.basket.products.push(b),a.basket.total++,a.basket.price+=parseInt(b.price,10)}function d(b){a.basket.products.splice(a.basket.products.indexOf(b),1),a.basket.total--,a.basket.price-=parseInt(b.price,10),console.log(a.basket.products)}a.basket={products:[],total:0,price:0},a.isloaded=!1,a.isproducts=!1,a.showBasketProducts=function(){a.isproducts=!0},a.hideBasketProducts=function(){a.isproducts=!1},b.$on("basket:add",function(){c(arguments[1])}),b.$on("basket:remove",function(){d(arguments[1])}),setTimeout(function(){a.isloaded=!0,a.$apply()},1e3)}]),angular.module("DaniDevBasket.directives",[]).directive("a",function(){"use strict";return{restrict:"E",link:function(a,b,c){"#_"===c.href&&b.on("click",function(a){a.preventDefault()})}}});